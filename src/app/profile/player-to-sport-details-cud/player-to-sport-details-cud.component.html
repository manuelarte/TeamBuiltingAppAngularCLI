<md-progress-spinner *ngIf="isBusyLoadingSports" mode="indeterminate">
</md-progress-spinner>

<div *ngIf="!isBusyLoadingSports && !isErrorLoadingSports()">
    <form [formGroup]="sportDetailsForm" (change)="emitForm()">

        <section>

            <md-select #sport placeholder="Select the Sport" [(ngModel)]="model.sport" formControlName="sport" (change)="emitForm()" required>
                <md-option *ngFor="let sport of sports" [value]="sport.name">
                    {{sport.name}}
                </md-option>
            </md-select>

            <md-select #mainPosition placeholder="Select Your Main Position" [(ngModel)]="model.mainPosition" formControlName="mainPosition" (change)="emitForm()" required>
                <md-option *ngFor="let position of getPositions(model.sport)" [value]="position.abbreviation">
                    {{position.fullName}}
                </md-option>
            </md-select>

            <md-select #otherPositions placeholder="Select Your Other Positions" [multiple]="true" [(ngModel)]="model.otherPositions" formControlName="otherPositions" (change)="emitForm()">
                <md-option *ngFor="let position of getSparePositions(model.sport)" [value]="position.abbreviation">
                    {{position.fullName}}
                </md-option>
            </md-select>

        </section>

        <section >
            <md-input-container class="example-full-width">
                <textarea #bio  mdInput placeholder="Bio" rows="5" [(ngModel)]="model.bio" formControlName="bio" id="bio" name="bio"></textarea>
                <md-error>Description of the position not valid.</md-error>
            </md-input-container>
        </section>

    </form>

    <div *ngIf="isShowSportField()">
        <h1>Position:</h1>
        <div [ngSwitch]="model.sport">
            <player-football-position *ngSwitchCase="'Football'" [players]="[player]"
                                      [playersDetails]="[model]">Loading football position...</player-football-position>
            <player-futsal-position *ngSwitchCase="'Futsal'" [players]="[player]"
                                    [playersDetails]="[model]">Loading futsal position...</player-futsal-position>
        </div>
    </div>

</div>


<div *ngIf="isErrorLoadingSports()">
    Error loading the sports, try again.
</div>
